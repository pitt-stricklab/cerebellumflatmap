# MarmosetCerebellumFlatmapTool
MarmosetCerebellumFlatmapTool is a MATLAB app for displaying flatmaps of the marmoset cerebellum and mapping intensity data and point clouds onto those flatmaps.

## Features
* **Flatmap Types**: Display a label flatmap (show regions), a border flatmap (show region borders), and a curvature flatmap (show surface concavity and convexity).
* **Intensity Mapping**: Display an intensity flatmap by mapping 3D intensity data registered to the standardized marmoset cerebellum atlas.
* **Point Mapping**: Map arbitrary 3D point clouds within the volume onto any flatmap type (label, border, curvature, or intensity).
* **Deployment Modes**: Run within MATLAB as an app, or as a standalone application on Windows, macOS, and Linux (requires MATLAB Runtime).

<img src=https://github.com/user-attachments/assets/9d089ce9-492a-43ad-a233-909c589ecef4 width="50%">
<img src=https://github.com/user-attachments/assets/1401ff54-75fe-4271-a67e-60291365be59 width="50%">
<img src=https://github.com/user-attachments/assets/518ddbb5-dbc2-4b3f-ad54-40b1c6d2ddd1 width="50%">
<img src=https://github.com/user-attachments/assets/a537969e-4d27-446f-b118-1d286af8130d width="50%">


## Requirements
* MATLAB (24.2)
* Image Processing Toolbox (24.2)
* MATLAB Runtime R2024b (24.2) for standalone execution

*These versions have been tested and confirmed; other versions are untested.*

## File Organization
```text
main/
├── functions/
└── pCerebellumFlatmap/
    ├── pMarmosetCerebellumFlatmapTool/
    │   ├── data/
    │   │   ├── data.mat
    │   │   ├── sample_intensity.nii.gz
    │   │   └── sample_point_cloud.csv
    │   └── MarmosetCerebellumFlatmapTool.mlapp 
    ├── CerebellumFlatmapGenerator.m
    └── FlatmapGenerator
```
* **MarmosetCerebellumFlatmapTool.mlapp**: App Designer file for an application that displays flatmaps generated by CerebellumFlatmapGenerator and maps intensity data and point clouds.
* **data.mat**: Data file containing a CerebellumFlatmapGenerator handle, used by MarmosetCerebellumFlatmapTool.
* **sample_intensity.nii.gz**: Sample cerebellum intensity data registered to the 3D standard marmoset cerebellar atlas.
* **sample_point_cloud.csv**: Sample point-cloud coordinates within the cerebellum registered to the 3D standard marmoset cerebellar atlas.
* **CerebellumFlatmapGenerator.m**: This class uses FlatmapGenerator to create various flatmaps from 3D marmoset cerebellum label data.
* **FlatmapGenerator.m**: This class generates flatmaps from 3D volume data segmented by label indices.

## Distribution Packages
Prebuilt archives are available under **Releases**
* **Windows x64**: mcft-win-x64-vX.Y.zip
* **Linux x64**: mcft-linux-x64-vX.Y.tar.gz
* **macOS x64**: mcft-osx-x64-vX.Y.tar.gz
* **MATLAB App Installer**: mcft-matlabapp-vX.Y.mlappinstall
